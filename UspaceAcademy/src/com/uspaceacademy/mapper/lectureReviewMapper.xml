<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="lectureReviewMapper">
	<!--  parameterType : 가져올값
			resultType :  리턴타입
	 -->
	 
	 
	 
	 
	 <sql id="lecture-review-columns">
	 review_no, review_writer, lecture_title, lecture_subject, review_title, review_content, review_date, review_hit
	 </sql>
	 
	 
	 
	 
	 
	 

<!-- ************************************************************************************************************************************************ -->

	<!-- 삽입 -->
	<insert id="insert" parameterType="LectureReview"><!--  mybatis-config에 타입알리야스 지정 -->
	INSERT INTO review_board VALUES (#{review_no},#{review_writer},#{lecture_title},#{lecture_subject},#{review_title},#{review_content},#{review_date},#{review_hit})                            
	</insert>
	

	
	
	<!-- 수정 -->
	<update id="update" parameterType="LectureReview">
	UPDATE review_board
	SET  	    reviewWriter=#{review_writer}, 
			    lectureTitle=#{lecture_title},
			    lectureSubject=#{lecture_subject}, 
			    reviewTitle=#{review_title}, 
			    reviewContent=#{review_content}, 
			    reviewDate=#{review_date}, 
			    reviewHit=#{review_hit} <!--  끝에 점 찍으면 안됨 -->
	WHERE  	reviewNo=#{review_no}	
	</update>
	
	
	
	<!-- 삭제 -->
	<delete id="deleteByNo" parameterType="string">
	DELETE FROM review_board WHERE reviewNo=#{review_no}
	</delete>
	
	
	
	<!--  전체조회 -->
	<select id="select" resultType="LectureReview">
	SELECT 	review_no reviewNo,
				review_writer reviewWriter,
				lecture_title lectureTitle,
				lecture_subject lectureSubject,
				review_title reviewTitle,
				review_content reviewContent,
				review_date reviewDate,
				review_hit reviewHit   
	FROM 	review_board
	</select>
	
	
	
	<!--  전체조회(no로)  -->
	<select id="selectNo" resultType="LectureReview" parameterType="string">
	SELECT 	review_no reviewNo,
				review_writer reviewWriter,
				lecture_title lectureTitle,
				lecture_subject lectureSubject,
				review_title reviewTitle,
				review_content reviewContent,
				review_date reviewDate,
				review_hit reviewHit      
	FROM 	review_board
	WHERE reviewNo=#{review_no}
	</select>
	
	
	
	
	<!--  전체조회(제목+내용) --> 
	<select id="selectTitleContent" resultType="LectureReview" parameterType="string">
	SELECT 	review_no reviewNo,
				review_writer reviewWriter,
				lecture_title lectureTitle,
				lecture_subject lectureSubject,
				review_title reviewTitle,
				review_content reviewContent,
				review_date reviewDate,
				review_hit reviewHit   
	FROM 	review_board
	WHERE lectureTitle=#{lecture_title} , reviewContent=#{review_content}
	</select>
	
	
	
	
	
	
	<!--  전체조회(제목) -->
	<select id="selectTitle" resultType="LectureReview" parameterType="string">
	SELECT 	review_no reviewNo,
				review_writer reviewWriter,
				lecture_title lectureTitle,
				lecture_subject lectureSubject,
				review_title reviewTitle,
				review_content reviewContent,
				review_date reviewDate,
				review_hit reviewHit   
	FROM 	review_board
	WHERE lectureTitle=#{lecture_title}
	</select>
	
	
	
	
	
	
	
	<!--  전체조회(내용) -->
	<select id="selectContent" resultType="LectureReview" parameterType="string">
	SELECT 	review_no reviewNo,
				review_writer reviewWriter,
				lecture_title lectureTitle,
				lecture_subject lectureSubject,
				review_title reviewTitle,
				review_content reviewContent,
				review_date reviewDate,
				review_hit reviewHit   
	FROM 	review_board
	WHERE reviewContent=#{review_content}
	</select>
	
	
	
	
	
	<!--  select 페이징 처리!! -->
	<select id="selectList" parameterType="map" resultType="LectureReview">
	SELECT <include refid="lecture-review-columns"/>
	FROM(SELECT CEIL (rownum/#{itemPerPage})page,<include refid="lecture-review-columns"/>
	FROM(SELECT <include refid="lecture-review-columns"/>
			FROM review_board order by review_no desc
		)
	)
	WHERE page=#{page}
	</select>
	
	
	
	
	
	
	
	


</mapper>










